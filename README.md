# Planning Agent システム

マルチエージェントシステムにおけるプランニング機能を効率化・最適化するエージェントベースのシステム

## 概要

Planning Agentシステムは、複数のエージェントが協調して動作するマルチエージェントシステムに対して、効率的かつ柔軟なプランニング機能を提供するシステムです。本システムは、エージェントシステムの性能における「プランニングの正確さとその管理能力」の重要性を検証することを目的としています。

## 主要機能

- **タスク分析機能**: ユーザーから受け取ったタスクを分析し、要件を明確化
- **プラン生成・分解機能**: タスクを実行可能なサブタスクに分解し、依存関係を特定
- **プラン管理機能**: プランの実行状況追跡と動的な調整
- **エージェント調整機能**: サブタスクに適したエージェントの選定と協調作業の最適化
- **ファイル管理機能**: YAML形式でのデータ保存・読み込み・履歴管理

## システム構成

本システムは以下のエージェントから構成されています：

1. **プランニングマネージャエージェント**: 全体のプランニングプロセスを統括
2. **要件分析エージェント**: ユーザー入力の分析と要件の明確化
3. **タスク分解エージェント**: タスクの分解と実行可能性評価
4. **課題管理エージェント**: プロジェクトの課題追跡と対応方針提示

## 技術スタック

- **言語**: Python 3.10以上
- **フレームワーク**: smolagentsフレームワーク
- **インターフェース**: 
  - CLIでの操作
  - MCP (Model Context Protocol) 対応
  - Claude 3.7 Sonnetとの連携

## プロジェクト構造

```
planning_agent/
├── config/
│   ├── agent_config.yaml      # エージェント設定
│   └── mcp_config.yaml        # MCP設定
├── agents/
│   ├── __init__.py
│   ├── planning_manager.py    # プランニングマネージャエージェント
│   ├── requirement_analyzer.py # 要件分析エージェント
│   ├── task_decomposer.py     # タスク分解エージェント
│   └── issue_manager.py       # 課題管理エージェント
├── mcp_interface/           # MCPサーバー関連
│   ├── __init__.py
│   └── server.py            # MCPサーバー実装 (FastMCP使用)
├── utils/
│   ├── __init__.py
│   ├── file_manager.py        # ファイル入出力機能
│   ├── tools.py               # smolagentsツール集
│   └── prompt_templates.py    # プロンプトテンプレート
├── cli.py                     # CLIインターフェース
└── main.py                    # メインエントリーポイント
```

## MCP機能

- **CreatePlan**: 新規プラン作成機能
- **UpdatePlan**: プラン更新機能
- **ReportIssue**: 課題報告・対応方針提示機能
- **ResetPlan**: タスク情報リセット機能

## インストール方法

```bash
# リポジトリのクローン
git clone https://github.com/Hajime-Y/planning_agent.git
cd planning_agent

# 環境のセットアップと依存パッケージのインストール
uv venv
source .venv/bin/activate
uv sync
```

## ファイル管理ユーティリティ

本システムでは、以下のYAML形式ファイル操作機能を提供しています：

- **要件ファイル管理**: タスク要件の保存と読み込み
- **プランファイル管理**: プランデータの保存、バージョン管理、履歴管理
- **課題ファイル管理**: 課題データの保存と追跡

これらの機能は、`utils/file_manager.py`で実装されており、smolagentsのツールとして`utils/tools.py`から利用可能です。

## 使用方法

（実装完了後に追記予定）

## 開発ロードマップ

1. **シングルエージェント基本機能とMCP基盤**
   - 要件定義機能
   - タスク分解機能
   - YAMLファイル出力機能

2. **プラン更新機能**
   - タスク完了フラグの更新
   - プラン変更機能
   - プラン履歴管理機能

3. **課題管理機能**
   - 課題管理機能
   - 課題ファイル出力機能
   - プラン更新提案機能

4. **マルチエージェント化**
   - 要件分析エージェントの追加
   - タスク分解エージェントの追加
   - 課題管理エージェントの追加

## 評価方法

- Sudoku-Benchを使用した定量評価
- エージェント間協調の効率性評価
- プランニング精度の評価
- タスク実行効率の比較評価

## ライセンス

（ライセンス情報を追記予定）

## 注記

本システムは概念実証（PoC）段階のプロジェクトであり、個人の開発環境での動作を前提としています。パフォーマンスやスケーラビリティは検証対象外です。

## 関連ドキュメント

- [PRD（Product Requirements Document）](docs/rpd.md)
- [設計ドキュメント](docs/design_doc.md) 