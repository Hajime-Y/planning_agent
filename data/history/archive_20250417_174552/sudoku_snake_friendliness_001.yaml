task_id: sudoku_snake_friendliness_001
title: 4×4数独＋スネーク＋フレンドリー制約の論理パズル解法
description: 4×4の数独に対し、通常の数独ルール（各行・列・2x2ボックスに1～4の各数字が一度ずつ）に加え、追加の'Snake'制約（いわゆるスネーク＝1セル幅、直交連結、自己接触しない道、r1c1始点、全ボックス訪問）、および'friendly'の制約（digitが行、列、ボックス番号のいずれかと等しければフレンドリー、そのセル以外がスネーク）を満たす解を、すべての選択がルールにより強制される場合のみ順を追って（各配置理由も明記して）導き出す。
constraints:
- 通常の4x4数独ルール（各行・列・2x2ボックスに1～4の各数字が1回ずつ）を守ること。
- 「friendly」とは、そのセルのdigitが行番号・列番号・ボックス番号（全て1～4）いずれかと一致していれば、そのセルはフレンドリーである。
- friendlyでないすべてのセルと、他のセルを含まないsnake（スネーク）が存在し、snakeはr1c1（左上）から始まり、直交方向で連結し、自己接触せず、途中で幅が2マスなどにならず、4つの2x2ボックス全てに少なくとも一度入り、その他のセルと隣接（直交で接触）しない。
- 配置はすべてルールにより一意的に強制される場合のみ進める（手筋や推察ではなく、理詰で確定する手のみ）。
- 各配置には、強制される理由（どの制約とどの状態により強制されるか）の説明を必ず添えること。
resources:
- 4×4の空白数独盤面
- 行・列・ボックス番号の定義規約
- friendlyおよびsnake定義
- 数独ルール説明
- snake経路の図示規約
- 配置履歴（どの順に配置・理由）
created_at: '2025-04-17T17:45:47.946826'
updated_at: '2025-04-17T17:45:47.946826'
